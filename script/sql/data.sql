USE meteor_movie;

-- =========================================
-- DEMO MOVIES (20)
-- id 区间：9000000000000000001 ~ 9020
-- =========================================
INSERT INTO movie
(id, title, alias, intro, duration_min, release_date, status, create_time, update_time, create_by, update_by, deleted)
VALUES
    (9000000000000000001,'流星计划','Meteor Plan','一群人试图把项目跑起来，最后跑起来的只有日志。',118,'2025-10-01',2,NOW(),NOW(),1,1,0),
    (9000000000000000002,'午夜排队','Midnight Queue','每个人都说不抢了，结果都在抢。',103,'2025-09-12',2,NOW(),NOW(),1,1,0),
    (9000000000000000003,'缓存之城','Cache City','城市运行在 Redis 上，偶尔丢一次记忆。',126,'2025-08-20',2,NOW(),NOW(),1,1,0),
    (9000000000000000004,'事务边界','Tx Boundary','同类自调用的诅咒，缠上了每个开发者。',110,'2025-07-18',2,NOW(),NOW(),1,1,0),
    (9000000000000000005,'无路由告警','No Route','消息发不出去，大家假装没看到。',95,'2025-06-06',2,NOW(),NOW(),1,1,0),
    (9000000000000000006,'未来开售','Coming Sale','开售时间永远在明天。',121,'2025-12-25',1,NOW(),NOW(),1,1,0),
    (9000000000000000007,'默认头像','Default Face','他换了头像，但人生没有变。',88,'2025-05-01',2,NOW(),NOW(),1,1,0),
    (9000000000000000008,'雪花编号','Snowflake ID','每个 ID 都独一无二，但 bug 会复用。',132,'2025-04-11',2,NOW(),NOW(),1,1,0),
    (9000000000000000009,'反代迷雾','Proxy Fog','域名背后藏着另一个域名。',107,'2025-03-08',2,NOW(),NOW(),1,1,0),
    (9000000000000000010,'热榜暗战','Hot Rank','榜单每天刷新，焦虑每分钟刷新。',114,'2025-02-14',2,NOW(),NOW(),1,1,0),
    (9000000000000000011,'分库时代','Sharding Age','外键消失后，自由与痛苦同时到来。',140,'2024-12-01',2,NOW(),NOW(),1,1,0),
    (9000000000000000012,'接口合并术','Merge Magic','把一切都 merge 进去，然后祈祷。',99,'2024-11-21',2,NOW(),NOW(),1,1,0),
    (9000000000000000013,'空值艺术','Null Art','null 不是错误，是哲学。',102,'2024-10-30',2,NOW(),NOW(),1,1,0),
    (9000000000000000014,'禁用外网','No Direct Access','除了网关，谁都别想进来。',111,'2024-09-15',2,NOW(),NOW(),1,1,0),
    (9000000000000000015,'票仓风暴','Ticket Storm','十万请求涌入，系统保持沉默。',124,'2024-08-08',2,NOW(),NOW(),1,1,0),
    (9000000000000000016,'观影偏好','Preference','你以为你在选择电影，其实算法在选择你。',116,'2024-07-07',2,NOW(),NOW(),1,1,0),
    (9000000000000000017,'影厅迷宫','Cinema Maze','走错一次，就坐到别人故事里。',105,'2024-06-06',2,NOW(),NOW(),1,1,0),
    (9000000000000000018,'断路器','Circuit Breaker','当你以为自己还行时，它先断了。',90,'2024-05-05',2,NOW(),NOW(),1,1,0),
    (9000000000000000019,'消息回声','Message Echo','通知来得太迟，但从不缺席。',112,'2024-04-04',2,NOW(),NOW(),1,1,0),
    (9000000000000000020,'最后的提交','Final Commit','他说提交完就睡，结果写到天亮。',97,'2024-03-03',2,NOW(),NOW(),1,1,0)
    ON DUPLICATE KEY UPDATE id=id;

-- =========================================
-- DEMO MOVIE-CATEGORY REL (每部电影 3 个分类)
-- 依赖：movie_category 已有 1..15
-- =========================================
INSERT INTO movie_category_rel
(id, movie_id, category_id, create_time, update_time, create_by, update_by, deleted)
VALUES
    (9100000000000000001,9000000000000000001,2,NOW(),NOW(),1,1,0),
    (9100000000000000002,9000000000000000001,1,NOW(),NOW(),1,1,0),
    (9100000000000000003,9000000000000000001,12,NOW(),NOW(),1,1,0),

    (9100000000000000004,9000000000000000002,3,NOW(),NOW(),1,1,0),
    (9100000000000000005,9000000000000000002,6,NOW(),NOW(),1,1,0),
    (9100000000000000006,9000000000000000002,7,NOW(),NOW(),1,1,0),

    (9100000000000000007,9000000000000000003,2,NOW(),NOW(),1,1,0),
    (9100000000000000008,9000000000000000003,13,NOW(),NOW(),1,1,0),
    (9100000000000000009,9000000000000000003,5,NOW(),NOW(),1,1,0),

    (9100000000000000010,9000000000000000004,7,NOW(),NOW(),1,1,0),
    (9100000000000000011,9000000000000000004,10,NOW(),NOW(),1,1,0),
    (9100000000000000012,9000000000000000004,5,NOW(),NOW(),1,1,0),

    (9100000000000000013,9000000000000000005,10,NOW(),NOW(),1,1,0),
    (9100000000000000014,9000000000000000005,5,NOW(),NOW(),1,1,0),
    (9100000000000000015,9000000000000000005,8,NOW(),NOW(),1,1,0),

    (9100000000000000016,9000000000000000006,1,NOW(),NOW(),1,1,0),
    (9100000000000000017,9000000000000000006,12,NOW(),NOW(),1,1,0),
    (9100000000000000018,9000000000000000006,2,NOW(),NOW(),1,1,0),

    (9100000000000000019,9000000000000000007,6,NOW(),NOW(),1,1,0),
    (9100000000000000020,9000000000000000007,15,NOW(),NOW(),1,1,0),
    (9100000000000000021,9000000000000000007,7,NOW(),NOW(),1,1,0),

    (9100000000000000022,9000000000000000008,2,NOW(),NOW(),1,1,0),
    (9100000000000000023,9000000000000000008,1,NOW(),NOW(),1,1,0),
    (9100000000000000024,9000000000000000008,12,NOW(),NOW(),1,1,0),

    (9100000000000000025,9000000000000000009,13,NOW(),NOW(),1,1,0),
    (9100000000000000026,9000000000000000009,2,NOW(),NOW(),1,1,0),
    (9100000000000000027,9000000000000000009,12,NOW(),NOW(),1,1,0),

    (9100000000000000028,9000000000000000010,10,NOW(),NOW(),1,1,0),
    (9100000000000000029,9000000000000000010,7,NOW(),NOW(),1,1,0),
    (9100000000000000030,9000000000000000010,5,NOW(),NOW(),1,1,0),

    (9100000000000000031,9000000000000000011,7,NOW(),NOW(),1,1,0),
    (9100000000000000032,9000000000000000011,12,NOW(),NOW(),1,1,0),
    (9100000000000000033,9000000000000000011,14,NOW(),NOW(),1,1,0),

    (9100000000000000034,9000000000000000012,6,NOW(),NOW(),1,1,0),
    (9100000000000000035,9000000000000000012,7,NOW(),NOW(),1,1,0),
    (9100000000000000036,9000000000000000012,3,NOW(),NOW(),1,1,0),

    (9100000000000000037,9000000000000000013,3,NOW(),NOW(),1,1,0),
    (9100000000000000038,9000000000000000013,7,NOW(),NOW(),1,1,0),
    (9100000000000000039,9000000000000000013,15,NOW(),NOW(),1,1,0),

    (9100000000000000040,9000000000000000014,1,NOW(),NOW(),1,1,0),
    (9100000000000000041,9000000000000000014,10,NOW(),NOW(),1,1,0),
    (9100000000000000042,9000000000000000014,5,NOW(),NOW(),1,1,0),

    (9100000000000000043,9000000000000000015,1,NOW(),NOW(),1,1,0),
    (9100000000000000044,9000000000000000015,2,NOW(),NOW(),1,1,0),
    (9100000000000000045,9000000000000000015,12,NOW(),NOW(),1,1,0),

    (9100000000000000046,9000000000000000016,3,NOW(),NOW(),1,1,0),
    (9100000000000000047,9000000000000000016,6,NOW(),NOW(),1,1,0),
    (9100000000000000048,9000000000000000016,7,NOW(),NOW(),1,1,0),

    (9100000000000000049,9000000000000000017,7,NOW(),NOW(),1,1,0),
    (9100000000000000050,9000000000000000017,5,NOW(),NOW(),1,1,0),
    (9100000000000000051,9000000000000000017,10,NOW(),NOW(),1,1,0),

    (9100000000000000052,9000000000000000018,2,NOW(),NOW(),1,1,0),
    (9100000000000000053,9000000000000000018,8,NOW(),NOW(),1,1,0),
    (9100000000000000054,9000000000000000018,12,NOW(),NOW(),1,1,0),

    (9100000000000000055,9000000000000000019,14,NOW(),NOW(),1,1,0),
    (9100000000000000056,9000000000000000019,7,NOW(),NOW(),1,1,0),
    (9100000000000000057,9000000000000000019,6,NOW(),NOW(),1,1,0),

    (9100000000000000058,9000000000000000020,7,NOW(),NOW(),1,1,0),
    (9100000000000000059,9000000000000000020,3,NOW(),NOW(),1,1,0),
    (9100000000000000060,9000000000000000020,6,NOW(),NOW(),1,1,0)
    ON DUPLICATE KEY UPDATE id=id;

-- =========================================
-- DEMO MEDIA ASSET (海报，统一用同一张，省心)
-- biz_type=1(movie), kind=1(POSTER)
-- object_key 指向你已有的海报路径
-- =========================================
INSERT INTO media_asset
(id, biz_type, biz_id, object_key, kind, sort, create_time, update_time, create_by, update_by, deleted)
VALUES
    (9200000000000000001,1,9000000000000000001,'movie/poster/20260202/poster.png',1,0,NOW(),NOW(),1,1,0),
    (9200000000000000002,1,9000000000000000002,'movie/poster/20260202/poster.png',1,0,NOW(),NOW(),1,1,0),
    (9200000000000000003,1,9000000000000000003,'movie/poster/20260202/poster.png',1,0,NOW(),NOW(),1,1,0),
    (9200000000000000004,1,9000000000000000004,'movie/poster/20260202/poster.png',1,0,NOW(),NOW(),1,1,0),
    (9200000000000000005,1,9000000000000000005,'movie/poster/20260202/poster.png',1,0,NOW(),NOW(),1,1,0),
    (9200000000000000006,1,9000000000000000006,'movie/poster/20260202/poster.png',1,0,NOW(),NOW(),1,1,0),
    (9200000000000000007,1,9000000000000000007,'movie/poster/20260202/poster.png',1,0,NOW(),NOW(),1,1,0),
    (9200000000000000008,1,9000000000000000008,'movie/poster/20260202/poster.png',1,0,NOW(),NOW(),1,1,0),
    (9200000000000000009,1,9000000000000000009,'movie/poster/20260202/poster.png',1,0,NOW(),NOW(),1,1,0),
    (9200000000000000010,1,9000000000000000010,'movie/poster/20260202/poster.png',1,0,NOW(),NOW(),1,1,0),
    (9200000000000000011,1,9000000000000000011,'movie/poster/20260202/poster.png',1,0,NOW(),NOW(),1,1,0),
    (9200000000000000012,1,9000000000000000012,'movie/poster/20260202/poster.png',1,0,NOW(),NOW(),1,1,0),
    (9200000000000000013,1,9000000000000000013,'movie/poster/20260202/poster.png',1,0,NOW(),NOW(),1,1,0),
    (9200000000000000014,1,9000000000000000014,'movie/poster/20260202/poster.png',1,0,NOW(),NOW(),1,1,0),
    (9200000000000000015,1,9000000000000000015,'movie/poster/20260202/poster.png',1,0,NOW(),NOW(),1,1,0),
    (9200000000000000016,1,9000000000000000016,'movie/poster/20260202/poster.png',1,0,NOW(),NOW(),1,1,0),
    (9200000000000000017,1,9000000000000000017,'movie/poster/20260202/poster.png',1,0,NOW(),NOW(),1,1,0),
    (9200000000000000018,1,9000000000000000018,'movie/poster/20260202/poster.png',1,0,NOW(),NOW(),1,1,0),
    (9200000000000000019,1,9000000000000000019,'movie/poster/20260202/poster.png',1,0,NOW(),NOW(),1,1,0),
    (9200000000000000020,1,9000000000000000020,'movie/poster/20260202/poster.png',1,0,NOW(),NOW(),1,1,0)
    ON DUPLICATE KEY UPDATE id=id;


INSERT INTO movie_category (id,name,sort,create_time,update_time,deleted)
VALUES
    (1,'动作',1,NOW(),NOW(),0),
    (2,'科幻',2,NOW(),NOW(),0),
    (3,'爱情',3,NOW(),NOW(),0),
    (4,'动画',4,NOW(),NOW(),0),
    (5,'悬疑',5,NOW(),NOW(),0),
    (6,'喜剧',6,NOW(),NOW(),0),
    (7,'剧情',7,NOW(),NOW(),0),
    (8,'惊悚',8,NOW(),NOW(),0),
    (9,'恐怖',9,NOW(),NOW(),0),
    (10,'犯罪',10,NOW(),NOW(),0),
    (11,'战争',11,NOW(),NOW(),0),
    (12,'冒险',12,NOW(),NOW(),0),
    (13,'奇幻',13,NOW(),NOW(),0),
    (14,'纪录片',14,NOW(),NOW(),0),
    (15,'家庭',15,NOW(),NOW(),0);








USE meteor_ticketing;

-- =========================================
-- DEMO SCREENINGS (每部电影 1 场)
-- id 自增也行，但为了幂等，这里写死 id
-- status: 1=SCHEDULED 2=SELLING
-- sale_end_time 允许 NULL
-- =========================================
INSERT INTO screening
(id, merchant_id, movie_id,
 start_time, end_time,
 sale_start_time, sale_end_time,
 status, sale_mode,
 base_price, min_price, max_price,
 total_tickets, available_tickets, sold_tickets,
 hot_score, version,
 create_time, update_time, create_by, update_by, deleted)
VALUES
    (8000000000000000001,1,9000000000000000001,
     NOW() + INTERVAL 1 DAY,
     NOW() + INTERVAL 1 DAY + INTERVAL 2 HOUR,
     NOW() - INTERVAL 2 HOUR,
     NULL,
     2,1, 5900,3900,6900, 120,80,40, 0,0, NOW(),NOW(),1,1,0),

    (8000000000000000002,1,9000000000000000002,
     NOW() + INTERVAL 2 DAY,
     NOW() + INTERVAL 2 DAY + INTERVAL 2 HOUR,
     NOW() - INTERVAL 1 HOUR,
     NULL,
     2,1, 3900,2900,4900, 100,50,50, 0,0, NOW(),NOW(),1,1,0),

    (8000000000000000003,1,9000000000000000003,
     NOW() + INTERVAL 3 DAY,
     NOW() + INTERVAL 3 DAY + INTERVAL 2 HOUR,
     NOW() + INTERVAL 1 HOUR,
     NULL,
     1,1, 4500,3500,5500, 90,90,0, 0,0, NOW(),NOW(),1,1,0),

    (8000000000000000004,1,9000000000000000004,
     NOW() + INTERVAL 4 DAY,
     NOW() + INTERVAL 4 DAY + INTERVAL 2 HOUR,
     NOW() + INTERVAL 2 HOUR,
     NULL,
     1,1, 5200,4200,6200, 80,80,0, 0,0, NOW(),NOW(),1,1,0),

    (8000000000000000005,1,9000000000000000005,
     NOW() + INTERVAL 5 DAY,
     NOW() + INTERVAL 5 DAY + INTERVAL 2 HOUR,
     NOW() + INTERVAL 3 HOUR,
     NULL,
     1,1, 6100,5100,7100, 150,150,0, 0,0, NOW(),NOW(),1,1,0),

    (8000000000000000006,1,9000000000000000006,
     NOW() + INTERVAL 6 DAY,
     NOW() + INTERVAL 6 DAY + INTERVAL 2 HOUR,
     NOW() + INTERVAL 2 DAY,
     NULL,
     1,1, 4800,3800,5800, 110,110,0, 0,0, NOW(),NOW(),1,1,0),

    (8000000000000000007,1,9000000000000000007,
     NOW() + INTERVAL 7 DAY,
     NOW() + INTERVAL 7 DAY + INTERVAL 2 HOUR,
     NOW() - INTERVAL 30 MINUTE,
     NULL,
     2,1, 3300,2300,4300, 70,20,50, 0,0, NOW(),NOW(),1,1,0),

    (8000000000000000008,1,9000000000000000008,
     NOW() + INTERVAL 8 DAY,
     NOW() + INTERVAL 8 DAY + INTERVAL 2 HOUR,
     NOW() + INTERVAL 6 HOUR,
     NULL,
     1,1, 5600,4600,6600, 100,100,0, 0,0, NOW(),NOW(),1,1,0),

    (8000000000000000009,1,9000000000000000009,
     NOW() + INTERVAL 9 DAY,
     NOW() + INTERVAL 9 DAY + INTERVAL 2 HOUR,
     NOW() + INTERVAL 5 HOUR,
     NULL,
     1,1, 4200,3200,5200, 95,95,0, 0,0, NOW(),NOW(),1,1,0),

    (8000000000000000010,1,9000000000000000010,
     NOW() + INTERVAL 10 DAY,
     NOW() + INTERVAL 10 DAY + INTERVAL 2 HOUR,
     NOW() - INTERVAL 10 MINUTE,
     NULL,
     2,1, 6700,5700,7700, 200,160,40, 0,0, NOW(),NOW(),1,1,0),

    (8000000000000000011,1,9000000000000000011,
     NOW() + INTERVAL 11 DAY,
     NOW() + INTERVAL 11 DAY + INTERVAL 2 HOUR,
     NOW() + INTERVAL 8 HOUR,
     NULL,
     1,1, 5100,4100,6100, 120,120,0, 0,0, NOW(),NOW(),1,1,0),

    (8000000000000000012,1,9000000000000000012,
     NOW() + INTERVAL 12 DAY,
     NOW() + INTERVAL 12 DAY + INTERVAL 2 HOUR,
     NOW() - INTERVAL 1 HOUR,
     NULL,
     2,1, 3800,2800,4800, 100,60,40, 0,0, NOW(),NOW(),1,1,0),

    (8000000000000000013,1,9000000000000000013,
     NOW() + INTERVAL 13 DAY,
     NOW() + INTERVAL 13 DAY + INTERVAL 2 HOUR,
     NOW() + INTERVAL 9 HOUR,
     NULL,
     1,1, 4600,3600,5600, 90,90,0, 0,0, NOW(),NOW(),1,1,0),

    (8000000000000000014,1,9000000000000000014,
     NOW() + INTERVAL 14 DAY,
     NOW() + INTERVAL 14 DAY + INTERVAL 2 HOUR,
     NOW() + INTERVAL 12 HOUR,
     NULL,
     1,1, 5200,4200,6200, 80,80,0, 0,0, NOW(),NOW(),1,1,0),

    (8000000000000000015,1,9000000000000000015,
     NOW() + INTERVAL 15 DAY,
     NOW() + INTERVAL 15 DAY + INTERVAL 2 HOUR,
     NOW() - INTERVAL 20 MINUTE,
     NULL,
     2,1, 5900,4900,6900, 150,120,30, 0,0, NOW(),NOW(),1,1,0),

    (8000000000000000016,1,9000000000000000016,
     NOW() + INTERVAL 16 DAY,
     NOW() + INTERVAL 16 DAY + INTERVAL 2 HOUR,
     NOW() + INTERVAL 1 DAY,
     NULL,
     1,1, 4100,3100,5100, 110,110,0, 0,0, NOW(),NOW(),1,1,0),

    (8000000000000000017,1,9000000000000000017,
     NOW() + INTERVAL 17 DAY,
     NOW() + INTERVAL 17 DAY + INTERVAL 2 HOUR,
     NOW() - INTERVAL 2 HOUR,
     NULL,
     2,1, 3600,2600,4600, 90,10,80, 0,0, NOW(),NOW(),1,1,0),

    (8000000000000000018,1,9000000000000000018,
     NOW() + INTERVAL 18 DAY,
     NOW() + INTERVAL 18 DAY + INTERVAL 2 HOUR,
     NOW() + INTERVAL 6 HOUR,
     NULL,
     1,1, 4400,3400,5400, 100,100,0, 0,0, NOW(),NOW(),1,1,0),

    (8000000000000000019,1,9000000000000000019,
     NOW() + INTERVAL 19 DAY,
     NOW() + INTERVAL 19 DAY + INTERVAL 2 HOUR,
     NOW() - INTERVAL 30 MINUTE,
     NULL,
     2,1, 4000,3000,5000, 120,40,80, 0,0, NOW(),NOW(),1,1,0),

    (8000000000000000020,1,9000000000000000020,
     NOW() + INTERVAL 20 DAY,
     NOW() + INTERVAL 20 DAY + INTERVAL 2 HOUR,
     NOW() + INTERVAL 3 HOUR,
     NULL,
     1,1, 3700,2700,4700, 80,80,0, 0,0, NOW(),NOW(),1,1,0)
    ON DUPLICATE KEY UPDATE id=id;

-- =========================================
-- DEMO HOT RANK (DAY, stat_date=今天)
-- 幂等依赖 uk_period_date_item(period, stat_date, screening_id)
-- =========================================
INSERT INTO hot_rank
(id, stat_date, screening_id, score, sold_cnt, order_cnt, create_time, update_time, create_by, deleted)
VALUES
    (7000000000000000001, CURDATE(), 8000000000000000001, 12000, 40, 28, NOW(), NOW(), 1, 0),
    (7000000000000000002, CURDATE(), 8000000000000000002,  9800, 50, 35, NOW(), NOW(), 1, 0),
    (7000000000000000003, CURDATE(), 8000000000000000003,  7600,  0,  0, NOW(), NOW(), 1, 0),
    (7000000000000000004, CURDATE(), 8000000000000000004,  8200,  0,  0, NOW(), NOW(), 1, 0),
    (7000000000000000005, CURDATE(), 8000000000000000005, 15000,  0,  0, NOW(), NOW(), 1, 0),

    (7000000000000000006, CURDATE(), 8000000000000000006,  5000,  0,  0, NOW(), NOW(), 1, 0),
    (7000000000000000007, CURDATE(), 8000000000000000007, 16000, 50, 42, NOW(), NOW(), 1, 0),
    (7000000000000000008, CURDATE(), 8000000000000000008,  6400,  0,  0, NOW(), NOW(), 1, 0),
    (7000000000000000009, CURDATE(), 8000000000000000009,  7100,  0,  0, NOW(), NOW(), 1, 0),
    (7000000000000000010, CURDATE(), 8000000000000000010, 19000, 40, 33, NOW(), NOW(), 1, 0),

    (7000000000000000011, CURDATE(), 8000000000000000011,  8800,  0,  0, NOW(), NOW(), 1, 0),
    (7000000000000000012, CURDATE(), 8000000000000000012, 13200, 40, 31, NOW(), NOW(), 1, 0),
    (7000000000000000013, CURDATE(), 8000000000000000013,  5400,  0,  0, NOW(), NOW(), 1, 0),
    (7000000000000000014, CURDATE(), 8000000000000000014,  6000,  0,  0, NOW(), NOW(), 1, 0),
    (7000000000000000015, CURDATE(), 8000000000000000015, 17000, 30, 22, NOW(), NOW(), 1, 0),

    (7000000000000000016, CURDATE(), 8000000000000000016,  4900,  0,  0, NOW(), NOW(), 1, 0),
    (7000000000000000017, CURDATE(), 8000000000000000017, 21000, 80, 55, NOW(), NOW(), 1, 0),
    (7000000000000000018, CURDATE(), 8000000000000000018,  6800,  0,  0, NOW(), NOW(), 1, 0),
    (7000000000000000019, CURDATE(), 8000000000000000019, 15500, 80, 49, NOW(), NOW(), 1, 0),
    (7000000000000000020, CURDATE(), 8000000000000000020,  7300,  0,  0, NOW(), NOW(), 1, 0)
ON DUPLICATE KEY UPDATE
                     stat_date   = VALUES(stat_date),
                     score       = VALUES(score),
                     sold_cnt    = VALUES(sold_cnt),
                     order_cnt   = VALUES(order_cnt),
                     update_time = VALUES(update_time),
                     create_by   = VALUES(create_by),
                     deleted     = VALUES(deleted);

